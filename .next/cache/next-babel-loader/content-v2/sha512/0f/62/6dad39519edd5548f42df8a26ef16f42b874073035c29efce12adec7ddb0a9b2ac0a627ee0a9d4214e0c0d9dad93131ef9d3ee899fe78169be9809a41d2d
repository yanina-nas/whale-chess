{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/folly/dev/match_game/match_game/pages/SourceBox.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useCallback, useMemo } from 'react';\nimport { useDrag } from 'react-dnd';\nimport { Colors, SVGIcon } from './common';\nconst style = {\n  border: '1px dashed gray',\n  padding: '0.5rem',\n  margin: '0.5rem'\n};\nexport const SourceBox = ({\n  color,\n  children\n}) => {\n  const {\n    0: forbidDrag,\n    1: setForbidDrag\n  } = useState(false);\n  const [{\n    isDragging\n  }, drag] = useDrag({\n    item: {\n      type: `${color}`\n    },\n    canDrag: !forbidDrag,\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n  const onToggleForbidDrag = useCallback(() => {\n    setForbidDrag(!forbidDrag);\n  }, [forbidDrag]);\n  const backgroundColor = useMemo(() => {\n    switch (color) {\n      case Colors.YELLOW:\n        return 'lightgoldenrodyellow';\n\n      case Colors.BLUE:\n        return 'lightblue';\n\n      default:\n        return 'lightgoldenrodyellow';\n    }\n  }, [color]);\n  const containerStyle = useMemo(() => _objectSpread(_objectSpread({}, style), {}, {\n    backgroundColor,\n    opacity: isDragging ? 0.4 : 1,\n    cursor: forbidDrag ? 'default' : 'move'\n  }), [isDragging, forbidDrag, backgroundColor]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    draggable: true,\n    ref: drag,\n    style: {\n      opacity: isDragging ? 0.5 : 1,\n      cursor: 'move'\n    },\n    children: /*#__PURE__*/_jsxDEV(SVGIcon, {\n      draggable: true,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        draggable: true,\n        src: '/whale.svg'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this) // <div ref={drag} style={containerStyle}>\n  //   <input\n  //     type=\"checkbox\"\n  //     checked={forbidDrag}\n  //     onChange={onToggleForbidDrag}\n  //   />\n  //   <small>Forbid drag</small>\n  //   {children}\n  // </div>\n  ;\n};\nexport default SourceBox;","map":{"version":3,"sources":["/Users/folly/dev/match_game/match_game/pages/SourceBox.tsx"],"names":["React","useState","useCallback","useMemo","useDrag","Colors","SVGIcon","style","border","padding","margin","SourceBox","color","children","forbidDrag","setForbidDrag","isDragging","drag","item","type","canDrag","collect","monitor","onToggleForbidDrag","backgroundColor","YELLOW","BLUE","containerStyle","opacity","cursor"],"mappings":";;;;;;;;;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,EAAuCC,OAAvC,QAAsD,OAAtD;AACA,SAASC,OAAT,QAA2C,WAA3C;AACA,SAASC,MAAT,EAA+BC,OAA/B,QAA8C,UAA9C;AAEA,MAAMC,KAA0B,GAAG;AACjCC,EAAAA,MAAM,EAAE,iBADyB;AAEjCC,EAAAA,OAAO,EAAE,QAFwB;AAGjCC,EAAAA,MAAM,EAAE;AAHyB,CAAnC;AAWA,OAAO,MAAMC,SAAmC,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAD,KAAyB;AAC1E,QAAM;AAAA,OAACC,UAAD;AAAA,OAAaC;AAAb,MAA8Bd,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAAC;AAAEe,IAAAA;AAAF,GAAD,EAAiBC,IAAjB,IAAyBb,OAAO,CAAC;AACrCc,IAAAA,IAAI,EAAE;AAAEC,MAAAA,IAAI,EAAG,GAAEP,KAAM;AAAjB,KAD+B;AAErCQ,IAAAA,OAAO,EAAE,CAACN,UAF2B;AAGrCO,IAAAA,OAAO,EAAGC,OAAD,KAAiC;AACxCN,MAAAA,UAAU,EAAEM,OAAO,CAACN,UAAR;AAD4B,KAAjC;AAH4B,GAAD,CAAtC;AAQA,QAAMO,kBAAkB,GAAGrB,WAAW,CAAC,MAAM;AAC3Ca,IAAAA,aAAa,CAAC,CAACD,UAAF,CAAb;AACD,GAFqC,EAEnC,CAACA,UAAD,CAFmC,CAAtC;AAIA,QAAMU,eAAe,GAAGrB,OAAO,CAAC,MAAM;AACpC,YAAQS,KAAR;AACE,WAAKP,MAAM,CAACoB,MAAZ;AACE,eAAO,sBAAP;;AACF,WAAKpB,MAAM,CAACqB,IAAZ;AACE,eAAO,WAAP;;AACF;AACE,eAAO,sBAAP;AANJ;AAQD,GAT8B,EAS5B,CAACd,KAAD,CAT4B,CAA/B;AAWA,QAAMe,cAAc,GAAGxB,OAAO,CAC5B,sCACKI,KADL;AAEEiB,IAAAA,eAFF;AAGEI,IAAAA,OAAO,EAAEZ,UAAU,GAAG,GAAH,GAAS,CAH9B;AAIEa,IAAAA,MAAM,EAAEf,UAAU,GAAG,SAAH,GAAe;AAJnC,IAD4B,EAO5B,CAACE,UAAD,EAAaF,UAAb,EAAyBU,eAAzB,CAP4B,CAA9B;AAUA,sBACE;AAAK,IAAA,SAAS,MAAd;AAAe,IAAA,GAAG,EAAEP,IAApB;AACQ,IAAA,KAAK,EAAE;AACHW,MAAAA,OAAO,EAAEZ,UAAU,GAAG,GAAH,GAAS,CADzB;AAEHa,MAAAA,MAAM,EAAE;AAFL,KADf;AAAA,2BAKQ,QAAC,OAAD;AAAS,MAAA,SAAS,MAAlB;AAAA,6BACI;AAAK,QAAA,SAAS,MAAd;AAAe,QAAA,GAAG,EAAE;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AALR;AAAA;AAAA;AAAA;AAAA,UADF,CAUE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBF;AAoBD,CAvDM;AAyDP,eAAelB,SAAf","sourcesContent":["import styled from '@emotion/styled'\nimport React, { useState, useCallback, useMemo } from 'react'\nimport { useDrag, DragSourceMonitor } from 'react-dnd'\nimport { Colors, SVGIconProps, SVGIcon } from './common'\n\nconst style: React.CSSProperties = {\n  border: '1px dashed gray',\n  padding: '0.5rem',\n  margin: '0.5rem',\n}\n\nexport interface SourceBoxProps {\n  color?: string\n  onToggleForbidDrag?: () => void\n}\n\nexport const SourceBox: React.FC<SourceBoxProps> = ({ color, children }) => {\n  const [forbidDrag, setForbidDrag] = useState(false)\n  const [{ isDragging }, drag] = useDrag({\n    item: { type: `${color}` },\n    canDrag: !forbidDrag,\n    collect: (monitor: DragSourceMonitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  })\n\n  const onToggleForbidDrag = useCallback(() => {\n    setForbidDrag(!forbidDrag)\n  }, [forbidDrag])\n\n  const backgroundColor = useMemo(() => {\n    switch (color) {\n      case Colors.YELLOW:\n        return 'lightgoldenrodyellow'\n      case Colors.BLUE:\n        return 'lightblue'\n      default:\n        return 'lightgoldenrodyellow'\n    }\n  }, [color])\n\n  const containerStyle = useMemo(\n    () => ({\n      ...style,\n      backgroundColor,\n      opacity: isDragging ? 0.4 : 1,\n      cursor: forbidDrag ? 'default' : 'move',\n    }),\n    [isDragging, forbidDrag, backgroundColor],\n  )\n\n  return (\n    <div draggable ref={drag} \n            style={{\n                opacity: isDragging ? 0.5 : 1,\n                cursor: 'move',\n            }}>\n            <SVGIcon draggable>\n                <img draggable src={'/whale.svg'}/>\n            </SVGIcon>\n        </div>\n    // <div ref={drag} style={containerStyle}>\n    //   <input\n    //     type=\"checkbox\"\n    //     checked={forbidDrag}\n    //     onChange={onToggleForbidDrag}\n    //   />\n    //   <small>Forbid drag</small>\n    //   {children}\n    // </div>\n  )\n}\n\nexport default SourceBox;\n\n"]},"metadata":{},"sourceType":"module"}